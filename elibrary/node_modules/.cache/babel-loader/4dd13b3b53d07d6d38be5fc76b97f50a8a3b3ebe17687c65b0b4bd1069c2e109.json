{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-d62bccae\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", {\n  class: \"navbar-brand\",\n  href: \"#\"\n}, \"Requests of Users for Books\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  style: {\n    \"margin-bottom\": \"20px\"\n  }\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"border\": \"5px solid #4169E1\"\n  }\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  style: {\n    \"font-weight\": \"bold\",\n    \"color\": \"#4169E1\",\n    \"flex\": \"1\"\n  }\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  key: 1\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-success\",\n  style: {\n    \"margin-right\": \"10px\"\n  }\n}, \"Approved\", -1 /* HOISTED */));\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  key: 2\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-info\",\n  style: {\n    \"margin-right\": \"10px\"\n  }\n}, \"Returned\", -1 /* HOISTED */));\nconst _hoisted_13 = [_hoisted_12];\nconst _hoisted_14 = {\n  key: 3\n};\nconst _hoisted_15 = {\n  class: \"btn btn-danger\",\n  style: {\n    \"margin-right\": \"10px\"\n  }\n};\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"border\": \"1px solid #4169E1\"\n  }\n}, null, -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"nav\", {\n    class: \"navbar navbar-expand-lg navbar-light bg-darkblue\"\n  }, [_hoisted_1, _createElementVNode(\"div\", {\n    class: \"navbar\",\n    id: \"navbarNav\"\n  }, [_createElementVNode(\"ul\", {\n    class: \"navbar-nav\"\n  }, [_createElementVNode(\"li\", {\n    class: \"navbar-button\"\n  }, [_createElementVNode(\"button\", {\n    type: \"navbar-button\",\n    class: \"btn btn-primary\",\n    onClick: $setup.redirectToHome\n  }, \"Home\")]), _createElementVNode(\"li\", {\n    class: \"navbar-button\"\n  }, [_createElementVNode(\"button\", {\n    type: \"navbar-button\",\n    class: \"btn btn-primary\",\n    onClick: $setup.Logout\n  }, \"Logout\")])])])]), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", null, [_createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.sortedItemsRequestedBook, request => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: request.id,\n      style: {\n        \"margin-bottom\": \"20px\",\n        \"display\": \"flex\",\n        \"align-items\": \"center\"\n      }\n    }, [_createElementVNode(\"h5\", _hoisted_4, \" Section: \" + _toDisplayString(request.Section_Title) + \"  |    Book: \" + _toDisplayString(request.Book_Title) + \"  |    User: \" + _toDisplayString(request.user_name) + \"  |    No. of Days Requested: \" + _toDisplayString(request.Ndays), 1 /* TEXT */), request.ReqStatus === 'Requested' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n      class: \"btn btn-warning\",\n      style: {\n        \"margin-right\": \"10px\"\n      },\n      onClick: $event => $setup.reqApprove(request.id)\n    }, \"Approve\", 8 /* PROPS */, _hoisted_6), _createElementVNode(\"button\", {\n      class: \"btn btn-danger\",\n      style: {\n        \"margin-right\": \"10px\"\n      },\n      onClick: $event => $setup.reqReject(request.id)\n    }, \"Reject\", 8 /* PROPS */, _hoisted_7)])) : request.ReqStatus === 'Approved' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"button\", {\n      class: \"btn btn-danger\",\n      style: {\n        \"margin-right\": \"10px\"\n      },\n      onClick: $event => $setup.reqReject(request.id)\n    }, \"Reject\", 8 /* PROPS */, _hoisted_10)])) : request.ReqStatus === 'Returned' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [..._hoisted_13])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createElementVNode(\"button\", _hoisted_15, _toDisplayString(request.ReqStatus), 1 /* TEXT */)]))]);\n  }), 128 /* KEYED_FRAGMENT */)), _hoisted_16])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","class","href","style","key","_hoisted_12","_createElementBlock","_Fragment","_hoisted_1","id","type","onClick","$setup","redirectToHome","Logout","_hoisted_2","_hoisted_3","_renderList","sortedItemsRequestedBook","request","_hoisted_4","_toDisplayString","Section_Title","Book_Title","user_name","Ndays","ReqStatus","_hoisted_5","$event","reqApprove","_hoisted_6","reqReject","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16"],"sources":["/Users/apsg/JANMAD2/elibrary/src/components/adDashReq.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-darkblue\">\n        <h4 class=\"navbar-brand\" href=\"#\">Requests of Users for Books</h4>\n        <div class=\"navbar\" id=\"navbarNav\">\n            <ul class=\"navbar-nav\">\n\n                <li class=\"navbar-button\">\n                    <button type=\"navbar-button\" class=\"btn btn-primary\" @click=\"redirectToHome\">Home</button>\n                </li>\n\n                <li class=\"navbar-button\">\n                    <button type=\"navbar-button\" class=\"btn btn-primary\" @click=\"Logout\">Logout</button>\n                </li>\n            </ul>\n        </div>\n    </nav>\n    <div>\n        <div>\n            <div>\n                <div style=\"margin-bottom: 20px;\">\n                    <hr style=\"border: 5px solid #4169E1;\">\n                    <div v-for=\"request in sortedItemsRequestedBook\" :key=\"request.id\"\n                        style=\"margin-bottom: 20px; display: flex; align-items: center;\">\n                        <h5 style=\"font-weight: bold; color: #4169E1; flex:1;\">\n                            Section: {{ request.Section_Title }} &nbsp;|&nbsp;&nbsp;&nbsp; Book: {{ request.Book_Title\n                            }} &nbsp;|&nbsp;&nbsp;&nbsp; User: {{ request.user_name }} &nbsp;|&nbsp;&nbsp;&nbsp; No. of\n                            Days Requested: {{ request.Ndays }}\n                        </h5>\n                        <div v-if=\"request.ReqStatus === 'Requested'\">\n                            <button class=\"btn btn-warning\" style=\"margin-right: 10px;\"\n                                @click=\"reqApprove(request.id)\">Approve</button>\n                            <button class=\"btn btn-danger\" style=\"margin-right: 10px;\"\n                                @click=\"reqReject(request.id)\">Reject</button>\n                        </div>\n                        <div v-else-if=\"request.ReqStatus === 'Approved'\">\n                            <button class=\"btn btn-success\" style=\"margin-right: 10px;\">Approved</button>\n                            <button class=\"btn btn-danger\" style=\"margin-right: 10px;\"\n                                @click=\"reqReject(request.id)\">Reject</button>\n                        </div>\n                        <div v-else-if=\"request.ReqStatus === 'Returned'\">\n                            <button class=\"btn btn-info\" style=\"margin-right: 10px;\">Returned</button>\n                        </div>\n                        <div v-else>\n                            <button class=\"btn btn-danger\" style=\"margin-right: 10px;\">{{ request.ReqStatus }}</button>\n                        </div>\n                    </div>\n                    <hr style=\"border: 1px solid #4169E1;\">\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n\n</template>\n\n<script setup>\nimport { onMounted, ref, computed } from 'vue';\nimport axios from 'axios';\n// import { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\n\n\nconst router = useRouter()\n\nconst items_requested_book = ref([]);\n\n// Define your methods and other logic here\n\n// Define computed property to sort the items_requested_book array\nconst sortedItemsRequestedBook = computed(() => {\n    const requested = [];\n    const approved = [];\n\n    items_requested_book.value.forEach(request => {\n        if (request.ReqStatus === 'Requested') {\n            requested.push(request);\n        } else {\n            approved.push(request);\n        }\n    });\n\n    return [...requested, ...approved];\n});\n\nfunction reqApprove(requestId) {\n    if (window.confirm(\"Do you really want to approve this Request ?\")) {\n        const url = `http://127.0.0.1:5000/book_request/${requestId}`;\n        const data = { 'ReqStatus': 'Approved' };\n        const token = localStorage.getItem('token');\n\n        // Set up Axios with the token in the headers\n        const axiosInstance = axios.create({\n            baseURL: 'http://127.0.0.1:5000',\n            headers: {\n                'Authorization': `Bearer ${token}`\n            }\n        });\n\n        try {\n            axiosInstance.patch(url, data).then((res) => {\n                console.log(res);\n                window.location.reload();\n            });\n        } catch (error) {\n            console.error('Error fetching Data:', error);\n        }\n    } else { // Do Nothing\n    }\n}\n\nfunction reqReject(requestId) {\n    if (window.confirm(\"Do you really want to Reject this Request ?\")) {\n        const url = `http://127.0.0.1:5000/book_request/${requestId}`;\n        const data = { 'ReqStatus': 'Rejected' };\n        const token = localStorage.getItem('token');\n\n        // Set up Axios with the token in the headers\n        const axiosInstance = axios.create({\n            baseURL: 'http://127.0.0.1:5000',\n            headers: {\n                'Authorization': `Bearer ${token}`\n            }\n        });\n\n        try {\n            axiosInstance.patch(url, data).then((res) => {\n                console.log(res);\n                window.location.reload();\n            });\n        } catch (error) {\n            console.error('Error fetching Data:', error);\n        }\n    } else { // Do Nothing\n    }\n}\n\nfunction fetchRequestedData() {\n\n    const url = `http://127.0.0.1:5000/book_request`;\n\n    const token = localStorage.getItem('token');\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000', // Your API server's URL\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    try {\n        axiosInstance.get(url).then((res) => {\n            console.log(res)\n            items_requested_book.value = res.data.bookReq\n        })\n    }\n    catch (error) {\n        console.error('Error fetching Data:', error);\n    }\n}\n\nfunction redirectToHome() {\n    router.push(`/adDash`)\n}\n\nfunction Logout() {\n    localStorage.clear();\n    router.push(`/loginPage/`)\n}\n\nonMounted(() => {\n    fetchRequestedData()\n\n});\n\n\n</script>\n\n<style scoped>\n.navbar {\n    display: flex;\n    /* Ensure items are in a row */\n    justify-content: space-between;\n    /* Push items to the ends of the container */\n    align-items: center;\n    /* Vertically center items if needed */\n    text-align: center;\n    padding: 10px;\n    /* Add padding as needed */\n    /* background-color: #333; Change background color if needed */\n    color: #fff\n        /*Change text color if needed */\n}\n\n.navbar-brand {\n    text-align: center;\n    /* Center-align the text within the navbar */\n    flex-grow: 1;\n    /* Allow the name to expand and take available space */\n    margin: 0;\n    /* Remove any default margin */\n    /* font-family: 'Arial', sans-serif;  */\n    font-size: 32px;\n    font-weight: bold;\n    color: #4169E1;\n}\n\n.navbar-button {\n    margin-left: 10px;\n    /* Add spacing between buttons */\n    color: #166295;\n    /* Additional button styles like background color, text color, etc. */\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}