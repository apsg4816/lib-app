{"ast":null,"code":"import { onMounted, ref, computed } from 'vue';\nimport axios from 'axios';\n// import { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'adDashReq',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const items_requested_book = ref([]);\n\n    // Define your methods and other logic here\n\n    // Define computed property to sort the items_requested_book array\n    const sortedItemsRequestedBook = computed(() => {\n      const requested = [];\n      const approved = [];\n      items_requested_book.value.forEach(request => {\n        if (request.ReqStatus === 'Requested') {\n          requested.push(request);\n        } else {\n          approved.push(request);\n        }\n      });\n      return [...requested, ...approved];\n    });\n    function reqApprove(requestId) {\n      if (window.confirm(\"Do you really want to approve this Request ?\")) {\n        const url = `http://127.0.0.1:5000/book_request/${requestId}`;\n        const data = {\n          'ReqStatus': 'Approved'\n        };\n        const token = localStorage.getItem('token');\n\n        // Set up Axios with the token in the headers\n        const axiosInstance = axios.create({\n          baseURL: 'http://127.0.0.1:5000',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        try {\n          axiosInstance.patch(url, data).then(res => {\n            console.log(res);\n            window.location.reload();\n          });\n        } catch (error) {\n          console.error('Error fetching Data:', error);\n        }\n      } else {// Do Nothing\n      }\n    }\n    function reqReject(requestId) {\n      if (window.confirm(\"Do you really want to Reject this Request ?\")) {\n        const url = `http://127.0.0.1:5000/book_request/${requestId}`;\n        const data = {\n          'ReqStatus': 'Rejected'\n        };\n        const token = localStorage.getItem('token');\n\n        // Set up Axios with the token in the headers\n        const axiosInstance = axios.create({\n          baseURL: 'http://127.0.0.1:5000',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        try {\n          axiosInstance.patch(url, data).then(res => {\n            console.log(res);\n            window.location.reload();\n          });\n        } catch (error) {\n          console.error('Error fetching Data:', error);\n        }\n      } else {// Do Nothing\n      }\n    }\n    function fetchRequestedData() {\n      const url = `http://127.0.0.1:5000/book_request`;\n      const token = localStorage.getItem('token');\n      // Set up Axios with the token in the headers\n      const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        // Your API server's URL\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      try {\n        axiosInstance.get(url).then(res => {\n          console.log(res);\n          items_requested_book.value = res.data.bookReq;\n        });\n      } catch (error) {\n        console.error('Error fetching Data:', error);\n      }\n    }\n    function redirectToHome() {\n      router.push(`/adDash`);\n    }\n    function Logout() {\n      localStorage.clear();\n      router.push(`/loginPage/`);\n    }\n    onMounted(() => {\n      fetchRequestedData();\n    });\n    const __returned__ = {\n      router,\n      items_requested_book,\n      sortedItemsRequestedBook,\n      reqApprove,\n      reqReject,\n      fetchRequestedData,\n      redirectToHome,\n      Logout,\n      onMounted,\n      ref,\n      computed,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","computed","axios","useRouter","router","items_requested_book","sortedItemsRequestedBook","requested","approved","value","forEach","request","ReqStatus","push","reqApprove","requestId","window","confirm","url","data","token","localStorage","getItem","axiosInstance","create","baseURL","headers","patch","then","res","console","log","location","reload","error","reqReject","fetchRequestedData","get","bookReq","redirectToHome","Logout","clear"],"sources":["/Users/apsg/JANMAD2/elibrary/src/components/adDashReq.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-darkblue\">\n        <h4 class=\"navbar-brand\" href=\"#\">Requests of Users for Books</h4>\n        <div class=\"navbar\" id=\"navbarNav\">\n            <ul class=\"navbar-nav\">\n\n                <li class=\"navbar-button\">\n                    <button type=\"navbar-button\" class=\"btn btn-primary\" @click=\"redirectToHome\">Home</button>\n                </li>\n\n                <li class=\"navbar-button\">\n                    <button type=\"navbar-button\" class=\"btn btn-primary\" @click=\"Logout\">Logout</button>\n                </li>\n            </ul>\n        </div>\n    </nav>\n    <div>\n        <div>\n   <div>\n            <div style=\"margin-bottom: 20px;\">\n            <hr style=\"border: 5px solid #4169E1;\">\n            <div v-for=\"request in sortedItemsRequestedBook\" :key=\"request.id\" style=\"margin-bottom: 20px; display: flex; align-items: center;\">\n                <h5 style=\"font-weight: bold; color: #4169E1; flex:1;\">\n                   Section: {{ request.Section_Title }} &nbsp;|&nbsp;&nbsp;&nbsp; Book: {{ request.Book_Title }} &nbsp;|&nbsp;&nbsp;&nbsp; User: {{ request.user_name }} &nbsp;|&nbsp;&nbsp;&nbsp; No. of Days Requested: {{ request.Ndays }}\n                </h5>\n                <div v-if=\"request.ReqStatus === 'Requested'\">\n                <button class=\"btn btn-warning\" style=\"margin-right: 10px;\" @click=\"reqApprove(request.id)\" >Approve</button>\n                <button class=\"btn btn-danger\" style=\"margin-right: 10px;\" @click=\"reqReject(request.id)\">Reject</button>\n            </div>\n            <div v-else-if=\"request.ReqStatus === 'Approved'\">\n                <button class=\"btn btn-success\" style=\"margin-right: 10px;\">Approved</button>\n                <button class=\"btn btn-danger\" style=\"margin-right: 10px;\" @click=\"reqReject(request.id)\">Reject</button>\n            </div>\n            <div  v-else-if=\"request.ReqStatus === 'Returned'\"  >\n                <button class=\"btn btn-info\" style=\"margin-right: 10px;\">Returned</button>\n            </div>\n            <div v-else>\n                <button class=\"btn btn-danger\" style=\"margin-right: 10px;\">{{ request.ReqStatus }}</button>\n            </div>\n        </div>\n            <hr style=\"border: 1px solid #4169E1;\">\n        </div>\n\n</div>\n\n</div>\n\n</div>\n\n</template>\n\n<script setup>\nimport { onMounted, ref,computed } from 'vue';\nimport axios from 'axios';\n// import { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\n\n\nconst router = useRouter()\n\nconst items_requested_book = ref([]);\n\n// Define your methods and other logic here\n\n// Define computed property to sort the items_requested_book array\nconst sortedItemsRequestedBook = computed(() => {\n    const requested = [];\n    const approved = [];\n    \n    items_requested_book.value.forEach(request => {\n        if (request.ReqStatus === 'Requested') {\n            requested.push(request);\n        } else {\n            approved.push(request);\n        }\n    });\n\n    return [...requested, ...approved];\n});\n\nfunction reqApprove(requestId) {\n    if (window.confirm(\"Do you really want to approve this Request ?\")){\n    const url = `http://127.0.0.1:5000/book_request/${requestId}`;\n    const data = {'ReqStatus': 'Approved'};\n    const token = localStorage.getItem('token');\n\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n\n    try {\n        axiosInstance.patch(url, data).then((res) => {\n            console.log(res);\n            window.location.reload();\n        });\n    } catch (error) {\n        console.error('Error fetching Data:', error);\n    }} else { // Do Nothing\n    }\n}\n\nfunction reqReject(requestId) {\n    if (window.confirm(\"Do you really want to Reject this Request ?\")){\n    const url = `http://127.0.0.1:5000/book_request/${requestId}`;\n    const data = {'ReqStatus': 'Rejected'};\n    const token = localStorage.getItem('token');\n\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n\n    try {\n        axiosInstance.patch(url, data).then((res) => {\n            console.log(res);\n            window.location.reload();\n        });\n    } catch (error) {\n        console.error('Error fetching Data:', error);\n    }} else { // Do Nothing\n    }\n}\n\nfunction fetchRequestedData() {\n\n    const url = `http://127.0.0.1:5000/book_request`;\n\n    const token = localStorage.getItem('token');\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000', // Your API server's URL\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    try {\n      axiosInstance.get(url).then((res) => {\n        console.log(res)\n        items_requested_book.value=res.data.bookReq\n      })\n    }\n    catch (error) {\n      console.error('Error fetching Data:', error);\n    }\n}\n\nfunction redirectToHome() {\n    router.push(`/adDash`)\n}\n\nfunction Logout() {\n    localStorage.clear();\n    router.push(`/loginPage/`)\n}\n\nonMounted(() => {\n   fetchRequestedData()\n  \n});\n\n\n</script>\n\n<style  scoped>\n.navbar {\n    display: flex;\n    /* Ensure items are in a row */\n    justify-content: space-between;\n    /* Push items to the ends of the container */\n    align-items: center;\n    /* Vertically center items if needed */\n    text-align: center;\n    padding: 10px;\n    /* Add padding as needed */\n    /* background-color: #333; Change background color if needed */\n    color: #fff\n        /*Change text color if needed */\n}\n\n.navbar-brand {\n    text-align: center;\n    /* Center-align the text within the navbar */\n    flex-grow: 1;\n    /* Allow the name to expand and take available space */\n    margin: 0;\n    /* Remove any default margin */\n    /* font-family: 'Arial', sans-serif;  */\n    font-size: 32px;\n    font-weight: bold;\n    color: #4169E1;\n}\n\n.navbar-button {\n    margin-left: 10px;\n    /* Add spacing between buttons */\n    color: #166295;\n    /* Additional button styles like background color, text color, etc. */\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}