{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onMounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'userFeedback',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n    const Book_Rating = ref(\"\");\n    const Book_Title = ref('');\n    const Book_Author = ref('');\n    const User_comments = ref('');\n    const Section_Title = ref(store.getters.getSection_Title_user);\n    const email = ref(store.getters.getemail);\n    const user_name = ref('');\n    console.log(email.value);\n    function submitFeedback() {\n      const url = \"http://127.0.0.1:5000/user_feedback\";\n      const data = {\n        Book_Rating: Book_Rating.value,\n        user_name: user_name.value,\n        Book_Title: Book_Title.value,\n        Section_Title: store.getters.getSection_Title_user,\n        BookId: store.getters.getBook_ID,\n        User_comments: User_comments.value\n        // user_id:user_id  ,\n      };\n      console.log(data);\n      const data_sent_config = {\n        headers: {\n          'Content-Type': \"application/json\"\n        }\n      };\n      const token = localStorage.getItem('token');\n\n      // Set up Axios with the token in the headers\n      const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        // Your API server's URL\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      axiosInstance.post(url, data, data_sent_config).then(res => {\n        console.log(res);\n        alert(res.data.message);\n        router.push(`/userDash/${user_name.value}`);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    function redirectToHome() {\n      router.push(`/userDash/${store.getters.getuser_name}`);\n    }\n    function Logout() {\n      // Clear the entire local storage\n      localStorage.clear();\n      router.push(`/loginPage/`);\n    }\n    function BookDetailsForRequest() {\n      const storedData2 = localStorage.getItem('user_name');\n      if (storedData2) {\n        user_name.value = JSON.parse(storedData2);\n      }\n      let BookId = store.getters.getBook_ID;\n      console.log(BookId);\n      const url = `http://127.0.0.1:5000/user_book/${BookId}`;\n      const token = localStorage.getItem('token');\n      // Set up Axios with the token in the headers\n      const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        // Your API server's URL\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      try {\n        axiosInstance.get(url).then(res => {\n          console.log(res);\n          Book_Title.value = res.data.book.Book_Title;\n          Book_Author.value = res.data.book.Author;\n        });\n      } catch (error) {\n        console.error('Error fetching Data:', error);\n      }\n    }\n    onMounted(() => {\n      BookDetailsForRequest();\n    });\n    const __returned__ = {\n      store,\n      router,\n      Book_Rating,\n      Book_Title,\n      Book_Author,\n      User_comments,\n      Section_Title,\n      email,\n      user_name,\n      submitFeedback,\n      redirectToHome,\n      Logout,\n      BookDetailsForRequest,\n      onMounted,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","useRouter","axios","useStore","store","router","Book_Rating","Book_Title","Book_Author","User_comments","Section_Title","getters","getSection_Title_user","email","getemail","user_name","console","log","value","submitFeedback","url","data","BookId","getBook_ID","data_sent_config","headers","token","localStorage","getItem","axiosInstance","create","baseURL","post","then","res","alert","message","push","catch","err","redirectToHome","getuser_name","Logout","clear","BookDetailsForRequest","storedData2","JSON","parse","get","book","Author","error"],"sources":["/Users/apsg/JANMAD2/elibrary/src/components/userFeedback.vue"],"sourcesContent":["<template>\n    <div>\n      <nav class=\"navbar navbar-expand-lg navbar-light bg-darkblue\">\n        <h4 class=\"navbar-brand\" href=\"#\"> Feedback for Books</h4>\n        <h4 class=\"navbar-brand\" href=\"#\"> {{Section_Title}}</h4>\n        <h4 class=\"navbar-brand\" href=\"#\">{{Book_Title}}</h4>\n        <h4 class=\"navbar-brand\" href=\"#\">{{Book_Author}}</h4>\n        <div class=\"navbar\" id=\"navbarNav\">\n          <ul class=\"navbar-nav\">\n            <li class=\"navbar-button\">\n              <button type=\"navbar-button\" class=\"btn btn-primary\" @click=\"redirectToHome\">Home</button>\n            </li>\n            <li class=\"navbar-button\">\n              <button type=\"navbar-button\" class=\"btn btn-danger\" @click=\"Logout\">Logout</button>\n            </li>\n          </ul>\n        </div>\n      </nav>\n  <hr style=\"border: 3px solid #4169E1;; \">\n      <head>\n        <meta charset=\"utf-8\">\n        <title> Book Feedback by User </title>\n      </head>\n  \n      <body>\n        <div class=\"wrapper\">\n          <div class=\"title\">\n            Feedback for Book\n          </div>\n          <form action=\"#\">\n            <div class=\"field\">\n              <input type=\"Number\" required v-model=\"Book_Rating\">\n              <label>Rating for {{Book_Title}}</label>\n            </div>\n            <div class=\"field\">\n              <input type=\"text\" required v-model=\"User_comments\">\n              <label>Comments for {{Book_Title}} </label>\n            </div>\n  \n            <div class=\"field\">\n              <input type=\"requestBook\"  readonly  value=\"Submit Feedback\" @click=\"submitFeedback\">\n            </div>\n          </form>\n        </div>\n      </body>\n  \n    </div>\n  </template>\n  \n  <script setup>\n  import { onMounted, ref } from 'vue';\n  import { useRouter } from 'vue-router';\n  import axios from 'axios';\n  import { useStore } from 'vuex';\n  \n  const store = useStore()\n  const router = useRouter();\n\n  \n  const Book_Rating = ref(\"\");\n  const Book_Title = ref('')\n  const Book_Author= ref('')\n  const User_comments=ref('')\n  const Section_Title = ref(store.getters.getSection_Title_user)\n  const email=ref(store.getters.getemail)\n  const user_name = ref('')\n  console.log(email.value)\n  function submitFeedback() {\n  \n  const url = \"http://127.0.0.1:5000/user_feedback\";\n  const data = {\n    Book_Rating: Book_Rating.value,\n    user_name: user_name.value,\n    Book_Title: Book_Title.value,\n    Section_Title: store.getters.getSection_Title_user,\n    BookId:store.getters.getBook_ID,\n    User_comments:User_comments.value,\n    // user_id:user_id  ,\n    \n  };\n  console.log(data);\n  const data_sent_config = {\n    headers: {\n      'Content-Type': \"application/json\"\n    },\n  }\n  const token = localStorage.getItem('token');\n  \n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000', // Your API server's URL\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n  \n    axiosInstance.post(url, data, data_sent_config).then((res) => {\n    console.log(res);\n    alert(res.data.message)\n    router.push(`/userDash/${user_name.value}`);\n  }).catch((err) => {\n    console.log(err);\n  })\n  }\n  \n  function redirectToHome(){\n    router.push(`/userDash/${store.getters.getuser_name}`)\n  }\n  \n  \n  function Logout(){\n    // Clear the entire local storage\n    localStorage.clear();\n    router.push(`/loginPage/`)\n  }\n  \n  \n  function BookDetailsForRequest() {\n    const storedData2 = localStorage.getItem('user_name');\n      if (storedData2) {\n          user_name.value = JSON.parse(storedData2);}\n    let BookId = store.getters.getBook_ID;\n    console.log(BookId)\n    const url = `http://127.0.0.1:5000/user_book/${BookId}`;\n\n    const token = localStorage.getItem('token');\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000', // Your API server's URL\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    try {\n      axiosInstance.get(url).then((res) => {\n        console.log(res)\n        Book_Title.value = res.data.book.Book_Title\n        Book_Author.value = res.data.book.Author\n        \n      })\n    }\n    catch (error) {\n      console.error('Error fetching Data:', error);\n    }\n  }\n  \n  onMounted(() => { BookDetailsForRequest()})\n  \n  </script>\n  \n<style scoped>\n\n@import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');\n\n/* * {\nmargin: 0;\npadding: 0;\nbox-sizing: border-box;\nfont-family: 'Poppins', sans-serif;\n} */\n\nhtml,\nbody {\ndisplay: grid;\nheight: 100%;\nwidth: 100%;\nplace-items: center;\nbackground: #ffffff;\n/* background: linear-gradient(-135deg, #c850c0, #4158d0); */\n}\n\n::selection {\nbackground: #4158d0;\ncolor: #fff;\n}\n\n.wrapper {\nwidth: 500px;\nbackground: #fff;\nborder-radius: 15px;\nbox-shadow: 0px 15px 20px rgba(0, 0, 0, 0.1);\n}\n\n.wrapper .title {\nfont-size: 35px;\nfont-weight: 600;\ntext-align: center;\nline-height: 100px;\ncolor: #fff;\nuser-select: none;\nborder-radius: 15px 15px 0 0;\nbackground-color: #4169E1;;\n/* background: linear-gradient(-135deg, #c850c0, #4158d0); */\n}\n\n.wrapper form {\npadding: 10px 30px 50px 30px;\n}\n\n.wrapper form .field {\nheight: 50px;\nwidth: 100%;\nmargin-top: 20px;\nposition: relative;\n\n}\n\n.wrapper form .field input {\nheight: 100%;\nwidth: 100%;\noutline: none;\nfont-size: 17px;\npadding-left: 20px;\nborder: 1px solid lightgrey;\nborder-radius: 25px;\ntransition: all 0.3s ease;\nalign-items: center;\nflex: 1;\n}\n\n.wrapper form .field:focus,\nform .field input:valid {\nborder-color: #4158d0;\n}\n\n.wrapper form .field label {\nposition: absolute;\ntop: 0;\nleft: 20px;\ncolor: #4158d0;\nfont-weight: 400;\nfont-size: 17px;\npointer-events: none;\ntransform: translateY(-50%);\ntransition: all 0.3s ease;\n\n}\n\nform .field input:focus~label,\nform .field input:valid~label {\ntop: 0%;\nfont-size: 16px;\ncolor: #4158d0;\nbackground: #fff;\ntransform: translateY(-50%);\ntext-align: center;\n}\n\n\n\nform .field input[type=\"requestBook\"] {\ncolor: #fff;\nborder: none;\npadding-left: 0;\nmargin-top: -10px;\nfont-size: 20px;\nfont-weight: 500;\n/* cursor: pointer; */\nbackground: linear-gradient(-135deg, #c850c0, #4158d0);\ntransition: all 0.3s ease;\ntext-align: center;\n}\n\nform .field input[type=\"requestBook\"]:active {\ntransform: scale(0.95);\n}\n\nform .pass-link a:hover,\nform .signup-link a:hover {\ntext-decoration: underline;\n}\n.navbar {\ndisplay: flex; /* Ensure items are in a row */\njustify-content: space-between; /* Push items to the ends of the container */\nalign-items: center; /* Vertically center items if needed */\ntext-align: center;\npadding: 10px; /* Add padding as needed */\n/* background-color: #333; Change background color if needed */\ncolor: #fff /*Change text color if needed */\n}\n.navbar-brand {\ntext-align: center; /* Center-align the text within the navbar */\nflex-grow: 1; /* Allow the name to expand and take available space */\nmargin: 0; /* Remove any default margin */\n/* font-family: 'Arial', sans-serif;  */\nfont-size: 32px; \nfont-weight: bold;\ncolor: #4169E1;\n}\n.navbar-button {\nmargin-left: 10px; /* Add spacing between buttons */\ncolor: #166295;\n/* Additional button styles like background color, text color, etc. */\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}