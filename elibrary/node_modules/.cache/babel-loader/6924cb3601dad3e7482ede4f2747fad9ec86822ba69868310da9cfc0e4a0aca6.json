{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6d10f6b3\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"navbar navbar-expand-lg navbar-light bg-darkblue\"\n};\nconst _hoisted_2 = {\n  class: \"navbar-brand\",\n  href: \"#\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"border\": \"5px solid #4169E1\"\n  }\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  style: {\n    \"margin-bottom\": \"20px\"\n  }\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"border\": \"5px solid #4169E1\"\n  }\n}, null, -1 /* HOISTED */));\nconst _hoisted_6 = {\n  style: {\n    \"font-weight\": \"bold\",\n    \"color\": \"#4169E1\",\n    \"flex\": \"1\"\n  }\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = {\n  key: 1\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  key: 2\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-info\",\n  style: {\n    \"margin-right\": \"10px\"\n  }\n}, \"Returned\", -1 /* HOISTED */));\nconst _hoisted_13 = {\n  key: 3\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-danger\",\n  style: {\n    \"margin-right\": \"10px\"\n  }\n}, \"Rejected\", -1 /* HOISTED */));\nconst _hoisted_15 = [_hoisted_14];\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"border\": \"10px solid #4169E1\"\n  }\n}, null, -1 /* HOISTED */));\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"border\": \"10px solid #4169E1\"\n  }\n}, null, -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"nav\", _hoisted_1, [_createElementVNode(\"h4\", _hoisted_2, _toDisplayString($setup.First_Name) + \"'s Books Current Status\", 1 /* TEXT */), _createElementVNode(\"div\", {\n    class: \"navbar\",\n    id: \"navbarNav\"\n  }, [_createElementVNode(\"ul\", {\n    class: \"navbar-nav\"\n  }, [_createElementVNode(\"li\", {\n    class: \"navbar-button\"\n  }, [_createElementVNode(\"button\", {\n    type: \"navbar-button\",\n    class: \"btn btn-primary\",\n    onClick: $setup.redirectToHome\n  }, \"Home\")]), _createElementVNode(\"li\", {\n    class: \"navbar-button\"\n  }, [_createElementVNode(\"button\", {\n    type: \"navbar-button\",\n    class: \"btn btn-primary\",\n    onClick: $setup.Logout\n  }, \"Logout\")])])])]), _createTextVNode(), _hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.sortedItemsRequestedBook, request => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: request.id,\n      style: {\n        \"margin-bottom\": \"20px\",\n        \"display\": \"flex\",\n        \"align-items\": \"center\"\n      }\n    }, [_createElementVNode(\"h5\", _hoisted_6, \" Section: \" + _toDisplayString(request.Section_Title) + \"  |    Book: \" + _toDisplayString(request.Book_Title) + \"  |    User: \" + _toDisplayString(request.user_name) + \"  |    No. of Days Requested: \" + _toDisplayString(request.Ndays), 1 /* TEXT */), request.ReqStatus === 'Requested' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n      style: {\n        \"margin-right\": \"10px\"\n      },\n      class: _normalizeClass({\n        'btn': true,\n        'btn-warning': request.ReqStatus === 'Requested'\n      })\n    }, \"Requested\", 2 /* CLASS */)])) : request.ReqStatus === 'Approved' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n      class: \"btn btn-outline-info\",\n      style: {\n        \"margin-right\": \"10px\"\n      },\n      onClick: $event => $setup.viewContent(request.Book_Title)\n    }, \"View Content\", 8 /* PROPS */, _hoisted_9), _createElementVNode(\"button\", {\n      class: \"btn btn-outline-danger\",\n      style: {\n        \"margin-right\": \"10px\"\n      },\n      onClick: $event => $setup.returnBook(request.id)\n    }, \"Return\", 8 /* PROPS */, _hoisted_10), _createElementVNode(\"button\", {\n      class: \"btn btn-outline-info\",\n      style: {\n        \"margin-right\": \"10px\"\n      },\n      onClick: _cache[0] || (_cache[0] = $event => $setup.userFeedback())\n    }, \"Feedback\")])) : request.ReqStatus === 'Returned' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_hoisted_12, _createElementVNode(\"button\", {\n      class: \"btn btn-outline-info\",\n      style: {\n        \"margin-right\": \"10px\"\n      },\n      onClick: _cache[1] || (_cache[1] = $event => $setup.userFeedback())\n    }, \"Feedback\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [..._hoisted_15])), _hoisted_16]);\n  }), 128 /* KEYED_FRAGMENT */)), _hoisted_17, _createCommentVNode(\" Horizontal rule after each iteration \")])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","href","_createElementVNode","style","key","_hoisted_14","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_toDisplayString","$setup","First_Name","id","type","onClick","redirectToHome","Logout","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_renderList","sortedItemsRequestedBook","request","_hoisted_6","Section_Title","Book_Title","user_name","Ndays","ReqStatus","_hoisted_7","_normalizeClass","_hoisted_8","$event","viewContent","_hoisted_9","returnBook","_hoisted_10","_cache","userFeedback","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_15","_hoisted_16","_hoisted_17","_createCommentVNode"],"sources":["/Users/apsg/JANMAD2/elibrary/src/components/userMyBooks.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-darkblue\">\n        <h4 class=\"navbar-brand\" href=\"#\">{{ First_Name }}'s Books Current Status</h4>      \n        <div class=\"navbar\" id=\"navbarNav\">\n            <ul class=\"navbar-nav\">\n\n                <li class=\"navbar-button\">\n                    <button type=\"navbar-button\" class=\"btn btn-primary\" @click=\"redirectToHome\">Home</button>\n                </li>\n\n                <li class=\"navbar-button\">\n                    <button type=\"navbar-button\" class=\"btn btn-primary\" @click=\"Logout\">Logout</button>\n                </li>\n            </ul>\n        </div>\n    </nav>    <hr style=\"border: 5px solid #4169E1;\">\n    <div style=\"margin-bottom: 20px;\">\n    <hr style=\"border: 5px solid #4169E1;\">\n   \n    <div v-for=\"request in sortedItemsRequestedBook\" :key=\"request.id\" style=\"margin-bottom: 20px; display: flex; align-items: center;\">\n        <h5 style=\"font-weight: bold; color: #4169E1; flex:1;\">\n            Section: {{ request.Section_Title }} &nbsp;|&nbsp;&nbsp;&nbsp; Book: {{ request.Book_Title }} &nbsp;|&nbsp;&nbsp;&nbsp; User: {{ request.user_name }} &nbsp;|&nbsp;&nbsp;&nbsp; No. of Days Requested: {{ request.Ndays }}\n        </h5>\n        \n        <div v-if=\"request.ReqStatus === 'Requested'\">\n        <button style=\"margin-right: 10px;\" :class=\"{ 'btn': true, 'btn-warning': request.ReqStatus === 'Requested', }\">Requested</button></div>\n        <div v-else-if=\"request.ReqStatus === 'Approved'\">\n            <button class=\"btn btn-outline-info\" style=\"margin-right: 10px;\" @click=\"viewContent(request.Book_Title)\">View Content</button>\n            <button class=\"btn btn-outline-danger\" style=\"margin-right: 10px;\" @click=\"returnBook(request.id)\">Return</button>\n            <button class=\"btn btn-outline-info\" style=\"margin-right: 10px;\" @click=\"userFeedback()\">Feedback</button>\n        </div>\n        <div v-else-if=\"request.ReqStatus === 'Returned'\">\n            <button class=\"btn btn-info\" style=\"margin-right: 10px;\">Returned</button>\n            <button class=\"btn btn-outline-info\" style=\"margin-right: 10px;\" @click=\"userFeedback()\">Feedback</button>\n        </div>\n        <div v-else>\n            <button class=\"btn btn-danger\" style=\"margin-right: 10px;\">Rejected</button>\n        </div>\n        <hr style=\"border: 10px solid #4169E1;\">\n    </div>\n    <hr style=\"border: 10px solid #4169E1;\"> <!-- Horizontal rule after each iteration -->\n</div>\n\n</template>\n\n<script setup>\nimport { onMounted, ref,computed } from 'vue';\nimport axios from 'axios';\n// import { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\n// const store = useStore()\nconst router = useRouter();\n\nconst user_name = ref('')\nconst First_Name =ref('')\nconst items_requested_book = ref([]);\n\n\n// computed property to sort the items_requested_book array\nconst sortedItemsRequestedBook = computed(() => {\n    const requested = [];\n    const approved = [];\n    const returned= [];\n    const rejected=[];\n    \n    items_requested_book.value.forEach(request => {\n        if (request.user_name === user_name.value){\n        if (request.ReqStatus === 'Requested') {\n            requested.push(request);\n        } else if(request.ReqStatus === 'Approved'){\n            approved.push(request);\n        }else if(request.ReqStatus === 'Rejected'){\n            rejected.push(request);\n        }else if(request.ReqStatus === 'Returned'){\n            returned.push(request);\n        }\n    }\n    });\n\n    return [...requested, ...approved,...rejected,...returned];\n});\n\nfunction viewContent(Book_Title){\n router.push(`/viewContent/${Book_Title}`)\n}\n\nfunction returnBook(requestId){\n    if (window.confirm(\"Do you really want to return this Book ?\")){\n    const url = `http://127.0.0.1:5000/book_request/${requestId}`;\n    const data = {'ReqStatus': 'Returned'};\n    const token = localStorage.getItem('token');\n\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n\n    try {\n        axiosInstance.patch(url, data).then((res) => {\n            console.log(res);\n            window.location.reload();\n        });\n    } catch (error) {\n        console.error('Error fetching Data:', error);\n    }} else { // Do Nothing\n    }\n}\n\nfunction fetchRequestedData() {\n    const storedData1 = localStorage.getItem('First_Name');\n    if (storedData1) {\n        First_Name.value = JSON.parse(storedData1);\n    }\n    else{ router.push('/loginPage')}\n     // For user name from local storage\n    const storedData2 = localStorage.getItem('user_name');\n    if (storedData2) {\n        user_name.value = JSON.parse(storedData2);\n    }else{ router.push('/loginPage')}\n\n    const url = `http://127.0.0.1:5000/book_request`;\n    \n    const token = localStorage.getItem('token');\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000', // Your API server's URL\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    try {\n      axiosInstance.get(url).then((res) => {\n        console.log(res)\n        items_requested_book.value=res.data.bookReq\n      })\n    }\n    catch (error) {\n      console.error('Error fetching Data:', error);\n    }\n}\n\nfunction redirectToHome() {\n    router.push(`/userDash`)\n}\nfunction userFeedback() {\n    router.push(`/userFeedback`)\n}\nfunction Logout() {\n    localStorage.clear();\n    router.push(`/loginPage/`)\n}\n\nonMounted(() => {\n   fetchRequestedData()\n  \n});\n\n</script>\n\n<style  scoped>\n.navbar {\n    display: flex;\n    /* Ensure items are in a row */\n    justify-content: space-between;\n    /* Push items to the ends of the container */\n    align-items: center;\n    /* Vertically center items if needed */\n    text-align: center;\n    padding: 10px;\n    /* Add padding as needed */\n    /* background-color: #333; Change background color if needed */\n    color: #fff\n        /*Change text color if needed */\n}\n\n.navbar-brand {\n    text-align: center;\n    /* Center-align the text within the navbar */\n    flex-grow: 1;\n    /* Allow the name to expand and take available space */\n    margin: 0;\n    /* Remove any default margin */\n    /* font-family: 'Arial', sans-serif;  */\n    font-size: 32px;\n    font-weight: bold;\n    color: #4169E1;\n}\n\n.navbar-button {\n    margin-left: 10px;\n    /* Add spacing between buttons */\n    color: #166295;\n    /* Additional button styles like background color, text color, etc. */\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}