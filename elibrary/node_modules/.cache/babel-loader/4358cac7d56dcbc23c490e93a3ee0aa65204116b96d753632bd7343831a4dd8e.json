{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'login_page',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n    const email = ref(\"\");\n    const password = ref(\"\");\n    function goToRegister() {\n      router.push('/registerPage');\n    }\n    function onLogin() {\n      const url = \"http://127.0.0.1:5000/login\";\n      const data = {\n        email: email.value,\n        password: password.value\n      };\n      const data_sent_config = {\n        headers: {\n          'Content-Type': \"application/json\"\n        }\n      };\n      axios.post(url, data, data_sent_config).then(res => {\n        if (res.data.role == \"END_USER\") {\n          localStorage.setItem('token', res.data.access_token);\n          store.commit(\"setUserData\", res.data);\n          localStorage.setItem('First_Name', JSON.stringify(res.data.First_Name));\n          localStorage.setItem('user_name', JSON.stringify(res.data.user_name));\n          localStorage.setItem('user_id', JSON.stringify(res.data.id));\n          localStorage.setItem('Last_Name', JSON.stringify(res.data.Last_Name));\n          router.push(`/userDash/${res.data.user_name}`);\n        }\n        if (res.data.role == \"ADMIN\") {\n          localStorage.setItem('token', res.data.access_token);\n          router.push('/adDash');\n        }\n      }).catch(err => {\n        alert(err.response.data.message);\n        console.log(err);\n      });\n    }\n    const __returned__ = {\n      store,\n      router,\n      email,\n      password,\n      goToRegister,\n      onLogin,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","axios","useStore","store","router","email","password","goToRegister","push","onLogin","url","data","value","data_sent_config","headers","post","then","res","role","localStorage","setItem","access_token","commit","JSON","stringify","First_Name","user_name","id","Last_Name","catch","err","alert","response","message","console","log"],"sources":["/Users/apsg/JANMAD2/elibrary/src/components/login_page.vue"],"sourcesContent":["<template>\n    <head>\n      <meta charset=\"utf-8\">\n      <title>App Login </title>\n    </head>\n  \n    <body>\n      <div class=\"wrapper\">\n        <div class=\"title\">\n          Login Form\n        </div>\n        <form action=\"#\">\n          <div class=\"field\">\n            <input type=\"email\" required v-model=\"email\">\n            <label>Email Address</label>\n          </div>\n          <div class=\"field\">\n            <input type=\"password\" required v-model=\"password\">\n            <label>Password</label>\n          </div>\n  \n          <div class=\"field\">\n            <input type=\"login\" value=\"Login\" readonly @click=\"onLogin\">\n          </div>\n          Not a user?\n          <div class=\"field\">\n            <input type=\"login\"  @click=\"goToRegister\" readonly value=\"Register\">\n          </div>\n  \n        </form>\n      </div>\n    </body>\n  </template>\n  \n  <script setup>\n  import { ref } from 'vue';\n  import { useRouter } from 'vue-router';\n  import axios from 'axios';\n  import { useStore } from 'vuex';\n  const store = useStore();\n  const router = useRouter();\n  \n  const email = ref(\"\");\n  const password = ref(\"\");\n  \n  \n  function goToRegister() {\n    router.push('/registerPage');\n  }\n  \n  function onLogin() {\n  \n    const url = \"http://127.0.0.1:5000/login\";\n    const data = {\n      email: email.value,\n      password: password.value\n    };\n  \n    const data_sent_config = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n    }\n  \n    axios.post(url, data, data_sent_config).then((res) => {\n      if (res.data.role == \"END_USER\") {\n  \n        localStorage.setItem('token', res.data.access_token);\n        store.commit(\"setUserData\", res.data)\n\n        localStorage.setItem('First_Name', JSON.stringify(res.data.First_Name));\n        localStorage.setItem('user_name', JSON.stringify(res.data.user_name));\n        localStorage.setItem('user_id', JSON.stringify(res.data.id));\n        localStorage.setItem('Last_Name', JSON.stringify(res.data.Last_Name));\n        \n        router.push(`/userDash/${res.data.user_name}`);\n      }\n      if (res.data.role == \"ADMIN\") {\n        localStorage.setItem('token', res.data.access_token);\n        router.push('/adDash');\n      }\n    }).catch((err) => {\n      alert(err.response.data.message)\n      console.log(err);\n    })\n  \n  }\n  </script>\n  \n  <style scoped>\n  @import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');\n  \n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Poppins', sans-serif;\n  }\n  \n  body {\n    display: grid;\n    height: 100%;\n    width: 100%;\n    place-items: center;\n    background: #f2f2f2;\n    /* background: linear-gradient(-135deg, #c850c0, #4158d0); */\n  }\n  \n  ::selection {\n    background: #4158d0;\n    color: #fff;\n  }\n  \n  .wrapper {\n    width: 380px;\n    background: #fff;\n    border-radius: 15px;\n    box-shadow: 0px 15px 20px rgba(0, 0, 0, 0.1);\n  }\n  \n  .wrapper .title {\n    font-size: 35px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 100px;\n    color: #fff;\n    user-select: none;\n    border-radius: 15px 15px 0 0;\n    background: linear-gradient(-135deg, #c850c0, #4158d0);\n  }\n  \n  .wrapper form {\n    padding: 10px 30px 50px 30px;\n  }\n  \n  .wrapper form .field {\n    height: 50px;\n    width: 100%;\n    margin-top: 20px;\n    position: relative;\n  }\n  \n  .wrapper form .field input {\n    height: 100%;\n    width: 100%;\n    outline: none;\n    font-size: 17px;\n    padding-left: 20px;\n    border: 1px solid lightgrey;\n    border-radius: 25px;\n    transition: all 0.3s ease;\n  }\n  \n  .wrapper form .field input:focus,\n  form .field input:valid {\n    border-color: #4158d0;\n  }\n  \n  .wrapper form .field label {\n    position: absolute;\n    top: 50%;\n    left: 20px;\n    color: #999999;\n    font-weight: 400;\n    font-size: 17px;\n    pointer-events: none;\n    transform: translateY(-50%);\n    transition: all 0.3s ease;\n  }\n  \n  form .field input:focus~label,\n  form .field input:valid~label {\n    top: 0%;\n    font-size: 16px;\n    color: #4158d0;\n    background: #fff;\n    transform: translateY(-50%);\n  }\n  \n  form .content {\n    display: flex;\n    width: 100%;\n    height: 50px;\n    font-size: 16px;\n    align-items: center;\n    justify-content: space-around;\n  }\n  \n  form .content .checkbox {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  \n  form .content input {\n    width: 15px;\n    height: 15px;\n    background: red;\n  }\n  \n  form .content label {\n    color: #262626;\n    user-select: none;\n    padding-left: 5px;\n  }\n  \n  form .content .pass-link {\n    color: \"\";\n  }\n  \n  form .field input[type=\"login\"] {\n    color: #fff;\n    border: none;\n    padding-left: 0;\n    margin-top: -10px;\n    font-size: 20px;\n    font-weight: 500;\n    cursor: pointer;\n    background: linear-gradient(-135deg, #c850c0, #4158d0);\n    transition: all 0.3s ease;\n    text-align: center;\n  }\n  \n  form .field input[type=\"login\"]:active {\n    transform: scale(0.95);\n  }\n  \n  form .signup-link {\n    color: #262626;\n    margin-top: 20px;\n    text-align: center;\n  }\n  \n  form .pass-link a,\n  form .signup-link a {\n    color: #4158d0;\n    text-decoration: none;\n  }\n  \n  form .pass-link a:hover,\n  form .signup-link a:hover {\n    text-decoration: underline;\n  }\n  </style>"],"mappings":";AAmCE,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,MAAM;;;;;;;IAC/B,MAAMC,KAAK,GAAGD,QAAQ,CAAC,CAAC;IACxB,MAAME,MAAM,GAAGJ,SAAS,CAAC,CAAC;IAE1B,MAAMK,KAAK,GAAGN,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMO,QAAQ,GAAGP,GAAG,CAAC,EAAE,CAAC;IAGxB,SAASQ,YAAYA,CAAA,EAAG;MACtBH,MAAM,CAACI,IAAI,CAAC,eAAe,CAAC;IAC9B;IAEA,SAASC,OAAOA,CAAA,EAAG;MAEjB,MAAMC,GAAG,GAAG,6BAA6B;MACzC,MAAMC,IAAI,GAAG;QACXN,KAAK,EAAEA,KAAK,CAACO,KAAK;QAClBN,QAAQ,EAAEA,QAAQ,CAACM;MACrB,CAAC;MAED,MAAMC,gBAAgB,GAAG;QACvBC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC;MAEDb,KAAK,CAACc,IAAI,CAACL,GAAG,EAAEC,IAAI,EAAEE,gBAAgB,CAAC,CAACG,IAAI,CAAEC,GAAG,IAAK;QACpD,IAAIA,GAAG,CAACN,IAAI,CAACO,IAAI,IAAI,UAAU,EAAE;UAE/BC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,GAAG,CAACN,IAAI,CAACU,YAAY,CAAC;UACpDlB,KAAK,CAACmB,MAAM,CAAC,aAAa,EAAEL,GAAG,CAACN,IAAI,CAAC;UAErCQ,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEG,IAAI,CAACC,SAAS,CAACP,GAAG,CAACN,IAAI,CAACc,UAAU,CAAC,CAAC;UACvEN,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEG,IAAI,CAACC,SAAS,CAACP,GAAG,CAACN,IAAI,CAACe,SAAS,CAAC,CAAC;UACrEP,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEG,IAAI,CAACC,SAAS,CAACP,GAAG,CAACN,IAAI,CAACgB,EAAE,CAAC,CAAC;UAC5DR,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEG,IAAI,CAACC,SAAS,CAACP,GAAG,CAACN,IAAI,CAACiB,SAAS,CAAC,CAAC;UAErExB,MAAM,CAACI,IAAI,CAAE,aAAYS,GAAG,CAACN,IAAI,CAACe,SAAU,EAAC,CAAC;QAChD;QACA,IAAIT,GAAG,CAACN,IAAI,CAACO,IAAI,IAAI,OAAO,EAAE;UAC5BC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,GAAG,CAACN,IAAI,CAACU,YAAY,CAAC;UACpDjB,MAAM,CAACI,IAAI,CAAC,SAAS,CAAC;QACxB;MACF,CAAC,CAAC,CAACqB,KAAK,CAAEC,GAAG,IAAK;QAChBC,KAAK,CAACD,GAAG,CAACE,QAAQ,CAACrB,IAAI,CAACsB,OAAO,CAAC;QAChCC,OAAO,CAACC,GAAG,CAACL,GAAG,CAAC;MAClB,CAAC,CAAC;IAEJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}