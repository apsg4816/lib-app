{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onMounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'userFeedback',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n    const Book_Rating = ref(\"\");\n    const Book_Title = ref('');\n    const Book_Author = ref('');\n    const User_comments = ref('');\n    const Section_Title = ref(store.getters.getSection_Title_user);\n    const user_id = JSON.parse(localStorage.getItem(user_id));\n    const user_name = ref('');\n    console.log(user_id);\n    console.log(user_name);\n    function submitFeedback() {\n      const url = \"http://127.0.0.1:5000/user_feedback\";\n      const data = {\n        Book_Rating: Book_Rating.value,\n        user_name: user_name.value,\n        Book_Title: Book_Title.value,\n        Section_Title: store.getters.getSection_Title_user,\n        BookId: store.getters.getforBookId_feed,\n        User_comments: User_comments.value,\n        user_id: 1\n      };\n      console.log(data);\n      const data_sent_config = {\n        headers: {\n          'Content-Type': \"application/json\"\n        }\n      };\n      const token = localStorage.getItem('token');\n\n      // Set up Axios with the token in the headers\n      const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        // Your API server's URL\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      axiosInstance.post(url, data, data_sent_config).then(res => {\n        console.log(res);\n        alert(res.data.message);\n        router.push(`/userDash/${user_name.value}`);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    function redirectToHome() {\n      router.push(`/userDash/${store.getters.getuser_name}`);\n    }\n    function Logout() {\n      // Clear the entire local storage\n      localStorage.clear();\n      router.push(`/loginPage/`);\n    }\n    function BookDetailsForRequest() {\n      const storedData2 = localStorage.getItem('user_name');\n      if (storedData2) {\n        user_name.value = JSON.parse(storedData2);\n      }\n      const BookId = store.getters.getforBookId_feed;\n      console.log(BookId);\n      console.log(user_name.value);\n      const url = `http://127.0.0.1:5000/user_book/${BookId}`;\n      const token = localStorage.getItem('token');\n      // Set up Axios with the token in the headers\n      const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      try {\n        axiosInstance.get(url).then(res => {\n          console.log(res);\n          Book_Title.value = res.data.book.Book_Title;\n          Book_Author.value = res.data.book.Author;\n        });\n      } catch (error) {\n        console.error('Error fetching Data:', error);\n      }\n    }\n    onMounted(() => {\n      BookDetailsForRequest();\n    });\n    const __returned__ = {\n      store,\n      router,\n      Book_Rating,\n      Book_Title,\n      Book_Author,\n      User_comments,\n      Section_Title,\n      user_id,\n      user_name,\n      submitFeedback,\n      redirectToHome,\n      Logout,\n      BookDetailsForRequest,\n      onMounted,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","useRouter","axios","useStore","store","router","Book_Rating","Book_Title","Book_Author","User_comments","Section_Title","getters","getSection_Title_user","user_id","JSON","parse","localStorage","getItem","user_name","console","log","submitFeedback","url","data","value","BookId","getforBookId_feed","data_sent_config","headers","token","axiosInstance","create","baseURL","post","then","res","alert","message","push","catch","err","redirectToHome","getuser_name","Logout","clear","BookDetailsForRequest","storedData2","get","book","Author","error"],"sources":["/Users/apsg/JANMAD2/elibrary/src/components/userFeedback.vue"],"sourcesContent":["<template>\n    <div>\n        <nav class=\"navbar navbar-expand-lg navbar-light bg-darkblue\">\n            <h4 class=\"navbar-brand\" href=\"#\"> Feedback for Books</h4>\n            <h4 class=\"navbar-brand\" href=\"#\"> {{ Section_Title }}</h4>\n            <h4 class=\"navbar-brand\" href=\"#\">{{ Book_Title }}</h4>\n            <h4 class=\"navbar-brand\" href=\"#\">{{ Book_Author }}</h4>\n            <div class=\"navbar\" id=\"navbarNav\">\n                <ul class=\"navbar-nav\">\n                    <li class=\"navbar-button\">\n                        <button type=\"navbar-button\" class=\"btn btn-primary\" @click=\"redirectToHome\">Home</button>\n                    </li>\n                    <li class=\"navbar-button\">\n                        <button type=\"navbar-button\" class=\"btn btn-danger\" @click=\"Logout\">Logout</button>\n                    </li>\n                </ul>\n            </div>\n        </nav>\n        <hr style=\"border: 3px solid #4169E1;; \">\n\n        <head>\n            <meta charset=\"utf-8\">\n            <title> Book Feedback by User </title>\n        </head>\n\n        <body>\n            <div class=\"wrapper\">\n                <div class=\"title\">\n                    Feedback for Book\n                </div>\n                <form action=\"#\">\n                    <div class=\"field\">\n                        <input type=\"Number\" required v-model=\"Book_Rating\">\n                        <label>Rating for {{ Book_Title }}</label>\n                    </div>\n                    <div class=\"field\">\n                        <input type=\"text\" required v-model=\"User_comments\">\n                        <label>Comments for {{ Book_Title }} </label>\n                    </div>\n\n                    <div class=\"field\">\n                        <input type=\"requestBook\" readonly value=\"Submit Feedback\" @click=\"submitFeedback\">\n                    </div>\n                </form>\n            </div>\n        </body>\n\n    </div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { useStore } from 'vuex';\n\nconst store = useStore()\nconst router = useRouter();\n\n\nconst Book_Rating = ref(\"\");\nconst Book_Title = ref('')\nconst Book_Author = ref('')\nconst User_comments = ref('')\nconst Section_Title = ref(store.getters.getSection_Title_user)\nconst user_id = JSON.parse(localStorage.getItem(user_id))\nconst user_name = ref('')\nconsole.log(user_id)\nconsole.log(user_name)\n\n\nfunction submitFeedback() {\n\n    const url = \"http://127.0.0.1:5000/user_feedback\";\n    const data = {\n        Book_Rating: Book_Rating.value,\n        user_name: user_name.value,\n        Book_Title: Book_Title.value,\n        Section_Title: store.getters.getSection_Title_user,\n        BookId: store.getters.getforBookId_feed,\n        User_comments: User_comments.value,\n        user_id: 1,\n\n    };\n    console.log(data);\n    const data_sent_config = {\n        headers: {\n            'Content-Type': \"application/json\"\n        },\n    }\n    const token = localStorage.getItem('token');\n\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000', // Your API server's URL\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n\n    axiosInstance.post(url, data, data_sent_config).then((res) => {\n        console.log(res);\n        alert(res.data.message)\n        router.push(`/userDash/${user_name.value}`);\n    }).catch((err) => {\n        console.log(err);\n    })\n}\n\nfunction redirectToHome() {\n    router.push(`/userDash/${store.getters.getuser_name}`)\n}\n\n\nfunction Logout() {\n    // Clear the entire local storage\n    localStorage.clear();\n    router.push(`/loginPage/`)\n}\n\n\nfunction BookDetailsForRequest() {\n    const storedData2 = localStorage.getItem('user_name');\n    if (storedData2) {\n        user_name.value = JSON.parse(storedData2);\n    }\n    const BookId = store.getters.getforBookId_feed;\n    console.log(BookId)\n    console.log(user_name.value)\n    const url = `http://127.0.0.1:5000/user_book/${BookId}`;\n\n    const token = localStorage.getItem('token');\n    // Set up Axios with the token in the headers\n    const axiosInstance = axios.create({\n        baseURL: 'http://127.0.0.1:5000',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    try {\n        axiosInstance.get(url).then((res) => {\n            console.log(res)\n            Book_Title.value = res.data.book.Book_Title\n            Book_Author.value = res.data.book.Author\n\n        })\n    }\n    catch (error) {\n        console.error('Error fetching Data:', error);\n    }\n}\n\nonMounted(() => { BookDetailsForRequest() })\n\n</script>\n\n<style scoped>\n@import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');\n\n/* * {\nmargin: 0;\npadding: 0;\nbox-sizing: border-box;\nfont-family: 'Poppins', sans-serif;\n} */\n\nhtml,\nbody {\n    display: grid;\n    height: 100%;\n    width: 100%;\n    place-items: center;\n    background: #ffffff;\n    /* background: linear-gradient(-135deg, #c850c0, #4158d0); */\n}\n\n::selection {\n    background: #4158d0;\n    color: #fff;\n}\n\n.wrapper {\n    width: 500px;\n    background: #fff;\n    border-radius: 15px;\n    box-shadow: 0px 15px 20px rgba(0, 0, 0, 0.1);\n}\n\n.wrapper .title {\n    font-size: 35px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 100px;\n    color: #fff;\n    user-select: none;\n    border-radius: 15px 15px 0 0;\n    background-color: #4169E1;\n    ;\n    /* background: linear-gradient(-135deg, #c850c0, #4158d0); */\n}\n\n.wrapper form {\n    padding: 10px 30px 50px 30px;\n}\n\n.wrapper form .field {\n    height: 50px;\n    width: 100%;\n    margin-top: 20px;\n    position: relative;\n\n}\n\n.wrapper form .field input {\n    height: 100%;\n    width: 100%;\n    outline: none;\n    font-size: 17px;\n    padding-left: 20px;\n    border: 1px solid lightgrey;\n    border-radius: 25px;\n    transition: all 0.3s ease;\n    align-items: center;\n    flex: 1;\n}\n\n.wrapper form .field:focus,\nform .field input:valid {\n    border-color: #4158d0;\n}\n\n.wrapper form .field label {\n    position: absolute;\n    top: 0;\n    left: 20px;\n    color: #4158d0;\n    font-weight: 400;\n    font-size: 17px;\n    pointer-events: none;\n    transform: translateY(-50%);\n    transition: all 0.3s ease;\n\n}\n\nform .field input:focus~label,\nform .field input:valid~label {\n    top: 0%;\n    font-size: 16px;\n    color: #4158d0;\n    background: #fff;\n    transform: translateY(-50%);\n    text-align: center;\n}\n\n\n\nform .field input[type=\"requestBook\"] {\n    color: #fff;\n    border: none;\n    padding-left: 0;\n    margin-top: -10px;\n    font-size: 20px;\n    font-weight: 500;\n    /* cursor: pointer; */\n    background: linear-gradient(-135deg, #c850c0, #4158d0);\n    transition: all 0.3s ease;\n    text-align: center;\n}\n\nform .field input[type=\"requestBook\"]:active {\n    transform: scale(0.95);\n}\n\nform .pass-link a:hover,\nform .signup-link a:hover {\n    text-decoration: underline;\n}\n\n.navbar {\n    display: flex;\n    /* Ensure items are in a row */\n    justify-content: space-between;\n    /* Push items to the ends of the container */\n    align-items: center;\n    /* Vertically center items if needed */\n    text-align: center;\n    padding: 10px;\n    /* Add padding as needed */\n    /* background-color: #333; Change background color if needed */\n    color: #fff\n        /*Change text color if needed */\n}\n\n.navbar-brand {\n    text-align: center;\n    /* Center-align the text within the navbar */\n    flex-grow: 1;\n    /* Allow the name to expand and take available space */\n    margin: 0;\n    /* Remove any default margin */\n    /* font-family: 'Arial', sans-serif;  */\n    font-size: 32px;\n    font-weight: bold;\n    color: #4169E1;\n}\n\n.navbar-button {\n    margin-left: 10px;\n    /* Add spacing between buttons */\n    color: #166295;\n    /* Additional button styles like background color, text color, etc. */\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}